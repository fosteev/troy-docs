# Troy — GeoRPG

Геолокационная RPG. Игрок ходит по реальному миру, встречает монстров на карте, сражается в реальном времени, получает лут и опыт, прокачивает персонажа.

## Платформа

- **Backend**: NestJS + Nx monorepo, PostgreSQL + PostGIS, Redis, NATS
- **Client**: Flutter (iOS/Android)
- **Realtime**: Socket.IO (WebSocket)

## Core Gameplay Loop

```
Открыл карту → Увидел моба → Подошёл физически → Начал бой →
→ Использовал скиллы → Победил → Получил XP + лут →
→ Прокачался → Экипировал шмот → Повторил
```

## Ключевые сущности

- **User** — аккаунт (email, пароль, авторизация)
- **Character** — игровой персонаж с классом, уровнем, статами. У одного User может быть несколько Character, но активный на карте — один

## Классы персонажей

На старте доступны 2 класса:

| Класс | Роль | Основные атрибуты |
|---|---|---|
| **Warrior** | Ближний бой, танк | Strength, Stamina |
| **Mage** | Магический урон, стекло | Intelligence, Agility |

Планируется: **Rogue** (Agility, крит, яды, быстрые атаки).

## Боевая система

- **Реалтайм с кулдаунами** — не пошаговая
- Между скиллами персонаж бьёт **автоатакой** (Warrior — физ. удар, Mage — магическая стрела)
- У каждого скилла: cast time, cooldown, mana cost, scaling от атрибутов
- **Agility** влияет на скорость атаки, время каста, кулдауны и крит
- Защита через **Armor** (физ. урон) и **Magic Resist** (маг. урон)
- Формула снижения урона: `reduction = defense / (defense + 100)`

## Прогрессия

- Макс. уровень: **30**
- Каждый уровень: авто-рост статов по классу + **2 свободных очка** атрибутов
- Скиллы открываются по уровням: 1(авто) → 3 → 6 → 10 → 15 → 20 → 25 (всего 6 скиллов)

## Документация

Детальное описание механик в папке `game-design/`:

| Файл | Описание |
|---|---|
| [overview.md](game-design/overview.md) | Концепция игры, core loop, основные принципы |
| [classes.md](game-design/classes.md) | Классы персонажей, стартовые статы, рост за уровень |
| [stats-and-formulas.md](game-design/stats-and-formulas.md) | Атрибуты, производные характеристики, все формулы |
| [leveling.md](game-design/leveling.md) | Система уровней, XP, свободные очки, разблокировка скиллов |
| [combat.md](game-design/combat.md) | Боевая система, автоатака, скиллы, расчёт урона |

## Статус

Проект на этапе проектирования. Код будет написан на основе этих документов.
